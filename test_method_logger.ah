#include "aspect_common.ah"

aspect AutoMethodLogger {

    pointcut VoidSetFunctions() = execution("void ...::CloneCString(...)");
    pointcut NonVoidSetFunctions() = execution("% ...::CloneCString(...)") && !VoidSetFunctions();

    advice NonVoidSetFunctions() : before() {
        std::ostringstream oss;
        oss << "[ENTER] " << tjp->signature();

        // 인자 출력 시작

        AspectLogger::log(oss.str());
    }

    advice NonVoidSetFunctions() : after() {
        std::ostringstream oss;
        oss << "[EXIT ] " << tjp->signature()
            << " => " << *tjp->result();
        AspectLogger::log(oss.str());
    }
};
